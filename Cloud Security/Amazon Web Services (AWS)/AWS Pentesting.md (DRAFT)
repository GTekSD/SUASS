1. Pentesting in the Cloud:
- The cloud computing service models
  - Created by the NIST 2009
  - Offer scalability and flexibility.
  - 3 Service modalities:
    - 1 IaaS (Infrastructure-as-a-service)
      - On-demand virtualized IT infrastructure
      - Most complete modality
      - Most Flexible
      - Provides infrastructure services.
  - Like network, storage, and virtualization

    - 2 PaaS (Platform-as-a-service)
      - Offers the infrastructure to host applications.
      - Simplifies setup and maintenance.
      - Less flexible compared to IaaS.
      - Blurry line between IaaS and PaaS
      - IaaS may come with a preconfigured OS.

    - 3 SaaS (Software-as-a-service)
      - Offers fully managed infrastructure.
      - Delivers software and licensing via subscription.
      - Client manages data and user access.
      - Easiest solution for the client
      - Least flexible.

    - 4 FaaS (Function-as-a-service)
      - Serverless architecture
      - On-demand functionality
      - No charges when not in use.
      - Easiest solution for the client
      - Least flexible.

- The AWS pentesting policy
  - AWS Customer Support/Service Policy for Penetration Testing
- https://aws.amazon.com/security/penetration-testing/
  - Permitted Services
- Amazon EC2 instances, WAF, NAT Gateways, and Elastic Load Balancers
- Amazon RDS
- Amazon CloudFront
- Amazon Aurora
- Amazon API Gateways
- AWS AppSync
- AWS Lambda and Lambda Edge functions
- Amazon Lightsail resources
- Amazon Elastic Beanstalk environments
- Amazon Elastic Container Service
- AWS Fargate
- Amazon Elasticsearch
- Amazon FSx
- Amazon Transit Gateway
- S3 hosted applications (targeting S3 buckets is strictly prohibited) 

  - Prohibited Activities
- DNS zone walking via Amazon Route 53 Hosted Zones
- DNS hijacking via Route 53
- DNS Pharming via Route 53
- Denial of Service (DoS), Distributed Denial of Service (DDoS), Simulated DoS, Simulated DDoS (These are subject to the DDoS Simulation Testing policy
- Port flooding
- Protocol flooding
- Request flooding (login request flooding, API request flooding) 

- Methodology
  - Pentesting:
- Identify vulnerable points in services.
- Simulating a real attack
- Same tools, techniques, and reasoning as hacking

  - Cloud Pentesting:
- Not all types of attacks are allowed.
- For SaaS and FaaS, pentests are generally not allowed at all.
- In some cases, comparable to pentesting an application.

  - STRIDE
- Threat model developed by Microsoft.
- Complete analysis of:
      - Proces ses
      - Data stores
      - Data streams
      - Confidence limits

- Mnemonic for six categories:
      - S – Spoofing
  - Pretend to be someone else.
- Steal credentials.
  - A07-ldentification and Authentication Failures (OWASP-2021)

      - T – Tampering
  - Modify data at rest or in transit.
- Change hosted image.
- Tamper API call.
- Alter cloud logs.
  - A03-lnjection (OWASP-2021)
  - A05-Security Misconfiguration (OWASP-2021)
  - A08-Software and Data Integrity Failures (OWASP-2021)

      - R – Repudiation
  - Deny an action.
- Delete cloud log.
- Mask performed action.
  - A07-ldentification and Authentication Failures (OWASP-2021)
  - A09-Security Logging and Monitoring Failures (OWASP-2021)

      - I - Information disclosure
  - Gain access to restricted data.
- Misconfigured data store.
  - A02-Cryptographic Failures (OWASP-2021)
  - A03-Injection (OWASP-2021)
  - A05-Security Misconfiguration (OWASP-2021)

      - D - Denial of Service
  - Destroy or encrypt resource.
- Make resource unavailable.
- Disable account or user.
  - A04-lnsecure Design(OWASP-2021)
  - A05-Security Misconfiguration (OWASP-2021)
  - A06-Vulnerable and Outdated Components (OWASP-2021)

      - E - Elevation of Privilege
  - Gain unauthorized permission.
- misconfigured IAM permission
  - A01 -Broken Access Control (OWASP-2021)
  - A07-ldentification and Authentication Failures (OWASP-2021)
  - A10-Server-Side Request Forgery (SSRF) (OWASP-2021)
